{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":52,"index":142}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":143},"end":{"line":3,"column":38,"index":181}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":223},"end":{"line":5,"column":39,"index":262}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":263},"end":{"line":6,"column":26,"index":289}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/NotificationContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.NotificationProvider = NotificationProvider;\n  exports.useNotification = useNotification;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _expoNotifications = require(_dependencyMap[2], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[3], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[4], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _expoConstants = require(_dependencyMap[5], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _axios = require(_dependencyMap[6], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[7], \"react/jsx-dev-runtime\");\n  const BACKEND_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: true\n    })\n  });\n  const NotificationContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function NotificationProvider({\n    children\n  }) {\n    _s();\n    const [expoPushToken, setExpoPushToken] = (0, _react.useState)(null);\n    const [notification, setNotification] = (0, _react.useState)(null);\n    (0, _react.useEffect)(() => {\n      const notificationListener = Notifications.addNotificationReceivedListener(notification => {\n        setNotification(notification);\n      });\n      const responseListener = Notifications.addNotificationResponseReceivedListener(response => {\n        console.log('Notification response:', response);\n      });\n      return () => {\n        Notifications.removeNotificationSubscription(notificationListener);\n        Notifications.removeNotificationSubscription(responseListener);\n      };\n    }, []);\n    const registerForPushNotifications = async userId => {\n      if (!Device.isDevice) {\n        console.log('Must use physical device for push notifications');\n        return;\n      }\n      try {\n        const {\n          status: existingStatus\n        } = await Notifications.getPermissionsAsync();\n        let finalStatus = existingStatus;\n        if (existingStatus !== 'granted') {\n          const {\n            status\n          } = await Notifications.requestPermissionsAsync();\n          finalStatus = status;\n        }\n        if (finalStatus !== 'granted') {\n          console.log('Failed to get push token');\n          return;\n        }\n        const projectId = Constants.default.expoConfig?.extra?.eas?.projectId;\n        if (!projectId) {\n          console.log('Project ID not configured');\n          return;\n        }\n        const token = await Notifications.getExpoPushTokenAsync({\n          projectId\n        });\n        setExpoPushToken(token.data);\n\n        // Send token to backend\n        await axios.default.post(`${BACKEND_URL}/api/push-tokens`, {\n          user_id: userId,\n          token: token.data,\n          platform: Platform.default.OS\n        });\n        console.log('Push token registered:', token.data);\n      } catch (error) {\n        console.error('Error registering for push notifications:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(NotificationContext.Provider, {\n      value: {\n        expoPushToken,\n        notification,\n        registerForPushNotifications\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }, this);\n  }\n  _s(NotificationProvider, \"aRE/eNENpqa2WRLbwZn3XmAeyNk=\");\n  _c = NotificationProvider;\n  function useNotification() {\n    _s2();\n    const context = (0, _react.useContext)(NotificationContext);\n    if (context === undefined) {\n      throw new Error('useNotification must be used within a NotificationProvider');\n    }\n    return context;\n  }\n  _s2(useNotification, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"NotificationProvider\");\n});","lineCount":139,"map":[[30,2,26,0,"exports"],[30,9,26,0],[30,10,26,0,"NotificationProvider"],[30,30,26,0],[30,33,26,0,"NotificationProvider"],[30,53,26,0],[31,2,98,0,"exports"],[31,9,98,0],[31,10,98,0,"useNotification"],[31,25,98,0],[31,28,98,0,"useNotification"],[31,43,98,0],[32,2,104,1],[32,6,104,1,"_expoVirtualEnv"],[32,21,104,1],[32,24,104,1,"require"],[32,31,104,1],[32,32,104,1,"_dependencyMap"],[32,46,104,1],[33,2,1,0],[33,6,1,0,"_react"],[33,12,1,0],[33,15,1,0,"require"],[33,22,1,0],[33,23,1,0,"_dependencyMap"],[33,37,1,0],[34,2,2,0],[34,6,2,0,"_expoNotifications"],[34,24,2,0],[34,27,2,0,"require"],[34,34,2,0],[34,35,2,0,"_dependencyMap"],[34,49,2,0],[35,2,2,0],[35,6,2,0,"Notifications"],[35,19,2,0],[35,22,2,0,"_interopNamespace"],[35,39,2,0],[35,40,2,0,"_expoNotifications"],[35,58,2,0],[36,2,3,0],[36,6,3,0,"_expoDevice"],[36,17,3,0],[36,20,3,0,"require"],[36,27,3,0],[36,28,3,0,"_dependencyMap"],[36,42,3,0],[37,2,3,0],[37,6,3,0,"Device"],[37,12,3,0],[37,15,3,0,"_interopNamespace"],[37,32,3,0],[37,33,3,0,"_expoDevice"],[37,44,3,0],[38,2,3,38],[38,6,3,38,"_reactNativeWebDistExportsPlatform"],[38,40,3,38],[38,43,3,38,"require"],[38,50,3,38],[38,51,3,38,"_dependencyMap"],[38,65,3,38],[39,2,3,38],[39,6,3,38,"Platform"],[39,14,3,38],[39,17,3,38,"_interopDefault"],[39,32,3,38],[39,33,3,38,"_reactNativeWebDistExportsPlatform"],[39,67,3,38],[40,2,5,0],[40,6,5,0,"_expoConstants"],[40,20,5,0],[40,23,5,0,"require"],[40,30,5,0],[40,31,5,0,"_dependencyMap"],[40,45,5,0],[41,2,5,0],[41,6,5,0,"Constants"],[41,15,5,0],[41,18,5,0,"_interopDefault"],[41,33,5,0],[41,34,5,0,"_expoConstants"],[41,48,5,0],[42,2,6,0],[42,6,6,0,"_axios"],[42,12,6,0],[42,15,6,0,"require"],[42,22,6,0],[42,23,6,0,"_dependencyMap"],[42,37,6,0],[43,2,6,0],[43,6,6,0,"axios"],[43,11,6,0],[43,14,6,0,"_interopDefault"],[43,29,6,0],[43,30,6,0,"_axios"],[43,36,6,0],[44,2,6,26],[44,6,6,26,"_reactJsxDevRuntime"],[44,25,6,26],[44,28,6,26,"require"],[44,35,6,26],[44,36,6,26,"_dependencyMap"],[44,50,6,26],[45,2,8,0],[45,8,8,6,"BACKEND_URL"],[45,19,8,17],[45,22,8,20,"Constants"],[45,31,8,29],[45,32,8,29,"default"],[45,39,8,29],[45,40,8,30,"expoConfig"],[45,50,8,40],[45,52,8,42,"extra"],[45,57,8,47],[45,59,8,49,"EXPO_PUBLIC_BACKEND_URL"],[45,82,8,72],[45,86,8,72,"_expoVirtualEnv"],[45,101,8,72],[45,102,8,72,"env"],[45,105,8,72],[45,106,8,72,"EXPO_PUBLIC_BACKEND_URL"],[45,129,8,111],[46,2,10,0,"Notifications"],[46,15,10,13],[46,16,10,14,"setNotificationHandler"],[46,38,10,36],[46,39,10,37],[47,4,11,2,"handleNotification"],[47,22,11,20],[47,24,11,22],[47,30,11,22,"handleNotification"],[47,31,11,22],[47,37,11,35],[48,6,12,4,"shouldShowAlert"],[48,21,12,19],[48,23,12,21],[48,27,12,25],[49,6,13,4,"shouldPlaySound"],[49,21,13,19],[49,23,13,21],[49,27,13,25],[50,6,14,4,"shouldSetBadge"],[50,20,14,18],[50,22,14,20],[51,4,15,2],[51,5,15,3],[52,2,16,0],[52,3,16,1],[52,4,16,2],[53,2,24,0],[53,8,24,6,"NotificationContext"],[53,27,24,25],[53,43,24,28],[53,47,24,28,"createContext"],[53,53,24,41],[53,54,24,41,"createContext"],[53,67,24,41],[53,69,24,79,"undefined"],[53,78,24,88],[53,79,24,89],[54,2,26,7],[54,11,26,16,"NotificationProvider"],[54,31,26,36,"NotificationProvider"],[54,32,26,37],[55,4,26,39,"children"],[56,2,26,73],[56,3,26,74],[56,5,26,76],[57,4,26,76,"_s"],[57,6,26,76],[58,4,27,2],[58,10,27,8],[58,11,27,9,"expoPushToken"],[58,24,27,22],[58,26,27,24,"setExpoPushToken"],[58,42,27,40],[58,43,27,41],[58,46,27,44],[58,50,27,44,"useState"],[58,56,27,52],[58,57,27,52,"useState"],[58,65,27,52],[58,67,27,68],[58,71,27,72],[58,72,27,73],[59,4,28,2],[59,10,28,8],[59,11,28,9,"notification"],[59,23,28,21],[59,25,28,23,"setNotification"],[59,40,28,38],[59,41,28,39],[59,44,28,42],[59,48,28,42,"useState"],[59,54,28,50],[59,55,28,50,"useState"],[59,63,28,50],[59,65,28,86],[59,69,28,90],[59,70,28,91],[60,4,30,2],[60,8,30,2,"useEffect"],[60,14,30,11],[60,15,30,11,"useEffect"],[60,24,30,11],[60,26,30,12],[60,32,30,18],[61,6,31,4],[61,12,31,10,"notificationListener"],[61,32,31,30],[61,35,31,33,"Notifications"],[61,48,31,46],[61,49,31,47,"addNotificationReceivedListener"],[61,80,31,78],[61,81,31,79,"notification"],[61,93,31,91],[61,97,31,95],[62,8,32,6,"setNotification"],[62,23,32,21],[62,24,32,22,"notification"],[62,36,32,34],[62,37,32,35],[63,6,33,4],[63,7,33,5],[63,8,33,6],[64,6,35,4],[64,12,35,10,"responseListener"],[64,28,35,26],[64,31,35,29,"Notifications"],[64,44,35,42],[64,45,35,43,"addNotificationResponseReceivedListener"],[64,84,35,82],[64,85,35,83,"response"],[64,93,35,91],[64,97,35,95],[65,8,36,6,"console"],[65,15,36,13],[65,16,36,14,"log"],[65,19,36,17],[65,20,36,18],[65,44,36,42],[65,46,36,44,"response"],[65,54,36,52],[65,55,36,53],[66,6,37,4],[66,7,37,5],[66,8,37,6],[67,6,39,4],[67,13,39,11],[67,19,39,17],[68,8,40,6,"Notifications"],[68,21,40,19],[68,22,40,20,"removeNotificationSubscription"],[68,52,40,50],[68,53,40,51,"notificationListener"],[68,73,40,71],[68,74,40,72],[69,8,41,6,"Notifications"],[69,21,41,19],[69,22,41,20,"removeNotificationSubscription"],[69,52,41,50],[69,53,41,51,"responseListener"],[69,69,41,67],[69,70,41,68],[70,6,42,4],[70,7,42,5],[71,4,43,2],[71,5,43,3],[71,7,43,5],[71,9,43,7],[71,10,43,8],[72,4,45,2],[72,10,45,8,"registerForPushNotifications"],[72,38,45,36],[72,41,45,39],[72,47,45,46,"userId"],[72,53,45,60],[72,57,45,65],[73,6,46,4],[73,10,46,8],[73,11,46,9,"Device"],[73,17,46,15],[73,18,46,16,"isDevice"],[73,26,46,24],[73,28,46,26],[74,8,47,6,"console"],[74,15,47,13],[74,16,47,14,"log"],[74,19,47,17],[74,20,47,18],[74,69,47,67],[74,70,47,68],[75,8,48,6],[76,6,49,4],[77,6,51,4],[77,10,51,8],[78,8,52,6],[78,14,52,12],[79,10,52,14,"status"],[79,16,52,20],[79,18,52,22,"existingStatus"],[80,8,52,37],[80,9,52,38],[80,12,52,41],[80,18,52,47,"Notifications"],[80,31,52,60],[80,32,52,61,"getPermissionsAsync"],[80,51,52,80],[80,52,52,81],[80,53,52,82],[81,8,53,6],[81,12,53,10,"finalStatus"],[81,23,53,21],[81,26,53,24,"existingStatus"],[81,40,53,38],[82,8,55,6],[82,12,55,10,"existingStatus"],[82,26,55,24],[82,31,55,29],[82,40,55,38],[82,42,55,40],[83,10,56,8],[83,16,56,14],[84,12,56,16,"status"],[85,10,56,23],[85,11,56,24],[85,14,56,27],[85,20,56,33,"Notifications"],[85,33,56,46],[85,34,56,47,"requestPermissionsAsync"],[85,57,56,70],[85,58,56,71],[85,59,56,72],[86,10,57,8,"finalStatus"],[86,21,57,19],[86,24,57,22,"status"],[86,30,57,28],[87,8,58,6],[88,8,60,6],[88,12,60,10,"finalStatus"],[88,23,60,21],[88,28,60,26],[88,37,60,35],[88,39,60,37],[89,10,61,8,"console"],[89,17,61,15],[89,18,61,16,"log"],[89,21,61,19],[89,22,61,20],[89,48,61,46],[89,49,61,47],[90,10,62,8],[91,8,63,6],[92,8,65,6],[92,14,65,12,"projectId"],[92,23,65,21],[92,26,65,24,"Constants"],[92,35,65,33],[92,36,65,33,"default"],[92,43,65,33],[92,44,65,34,"expoConfig"],[92,54,65,44],[92,56,65,46,"extra"],[92,61,65,51],[92,63,65,53,"eas"],[92,66,65,56],[92,68,65,58,"projectId"],[92,77,65,67],[93,8,66,6],[93,12,66,10],[93,13,66,11,"projectId"],[93,22,66,20],[93,24,66,22],[94,10,67,8,"console"],[94,17,67,15],[94,18,67,16,"log"],[94,21,67,19],[94,22,67,20],[94,49,67,47],[94,50,67,48],[95,10,68,8],[96,8,69,6],[97,8,71,6],[97,14,71,12,"token"],[97,19,71,17],[97,22,71,20],[97,28,71,26,"Notifications"],[97,41,71,39],[97,42,71,40,"getExpoPushTokenAsync"],[97,63,71,61],[97,64,71,62],[98,10,71,64,"projectId"],[99,8,71,74],[99,9,71,75],[99,10,71,76],[100,8,72,6,"setExpoPushToken"],[100,24,72,22],[100,25,72,23,"token"],[100,30,72,28],[100,31,72,29,"data"],[100,35,72,33],[100,36,72,34],[102,8,74,6],[103,8,75,6],[103,14,75,12,"axios"],[103,19,75,17],[103,20,75,17,"default"],[103,27,75,17],[103,28,75,18,"post"],[103,32,75,22],[103,33,75,23],[103,36,75,26,"BACKEND_URL"],[103,47,75,37],[103,65,75,55],[103,67,75,57],[104,10,76,8,"user_id"],[104,17,76,15],[104,19,76,17,"userId"],[104,25,76,23],[105,10,77,8,"token"],[105,15,77,13],[105,17,77,15,"token"],[105,22,77,20],[105,23,77,21,"data"],[105,27,77,25],[106,10,78,8,"platform"],[106,18,78,16],[106,20,78,18,"Platform"],[106,28,78,26],[106,29,78,26,"default"],[106,36,78,26],[106,37,78,27,"OS"],[107,8,79,6],[107,9,79,7],[107,10,79,8],[108,8,81,6,"console"],[108,15,81,13],[108,16,81,14,"log"],[108,19,81,17],[108,20,81,18],[108,44,81,42],[108,46,81,44,"token"],[108,51,81,49],[108,52,81,50,"data"],[108,56,81,54],[108,57,81,55],[109,6,82,4],[109,7,82,5],[109,8,82,6],[109,15,82,13,"error"],[109,20,82,18],[109,22,82,20],[110,8,83,6,"console"],[110,15,83,13],[110,16,83,14,"error"],[110,21,83,19],[110,22,83,20],[110,65,83,63],[110,67,83,65,"error"],[110,72,83,70],[110,73,83,71],[111,6,84,4],[112,4,85,2],[112,5,85,3],[113,4,87,2],[113,24,88,4],[113,28,88,4,"_reactJsxDevRuntime"],[113,47,88,4],[113,48,88,4,"jsxDEV"],[113,54,88,4],[113,56,88,5,"NotificationContext"],[113,75,88,24],[113,76,88,25,"Provider"],[113,84,88,33],[114,6,88,34,"value"],[114,11,88,39],[114,13,88,41],[115,8,89,6,"expoPushToken"],[115,21,89,19],[116,8,90,6,"notification"],[116,20,90,18],[117,8,91,6,"registerForPushNotifications"],[118,6,92,4],[118,7,92,6],[119,6,92,6,"children"],[119,14,92,6],[119,16,93,7,"children"],[120,4,93,15],[121,6,93,15,"fileName"],[121,14,93,15],[121,16,93,15,"_jsxFileName"],[121,28,93,15],[122,6,93,15,"lineNumber"],[122,16,93,15],[123,6,93,15,"columnNumber"],[123,18,93,15],[124,4,93,15],[124,11,94,34],[124,12,94,35],[125,2,96,0],[126,2,96,1,"_s"],[126,4,96,1],[126,5,26,16,"NotificationProvider"],[126,25,26,36],[127,2,26,36,"_c"],[127,4,26,36],[127,7,26,16,"NotificationProvider"],[127,27,26,36],[128,2,98,7],[128,11,98,16,"useNotification"],[128,26,98,31,"useNotification"],[128,27,98,31],[128,29,98,34],[129,4,98,34,"_s2"],[129,7,98,34],[130,4,99,2],[130,10,99,8,"context"],[130,17,99,15],[130,20,99,18],[130,24,99,18,"useContext"],[130,30,99,28],[130,31,99,28,"useContext"],[130,41,99,28],[130,43,99,29,"NotificationContext"],[130,62,99,48],[130,63,99,49],[131,4,100,2],[131,8,100,6,"context"],[131,15,100,13],[131,20,100,18,"undefined"],[131,29,100,27],[131,31,100,29],[132,6,101,4],[132,12,101,10],[132,16,101,14,"Error"],[132,21,101,19],[132,22,101,20],[132,82,101,80],[132,83,101,81],[133,4,102,2],[134,4,103,2],[134,11,103,9,"context"],[134,18,103,16],[135,2,104,0],[136,2,104,1,"_s2"],[136,5,104,1],[136,6,98,16,"useNotification"],[136,21,98,31],[137,2,98,31],[137,6,98,31,"_c"],[137,8,98,31],[138,2,98,31,"$RefreshReg$"],[138,14,98,31],[138,15,98,31,"_c"],[138,17,98,31],[139,0,98,31],[139,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","NotificationProvider","useEffect$argument_0","Notifications.addNotificationReceivedListener$argument_0","Notifications.addNotificationResponseReceivedListener$argument_0","<anonymous>","registerForPushNotifications","useNotification"],"mappings":"AAA;sBCU;IDI;OEW;YCI;+ECC;KDE;mFEE;KFE;WGE;KHG;GDC;uCKE;GLwC;CFW;OQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}