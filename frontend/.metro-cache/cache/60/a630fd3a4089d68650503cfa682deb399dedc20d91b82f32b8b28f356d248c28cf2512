{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":52,"index":142}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":143},"end":{"line":3,"column":38,"index":181}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":223},"end":{"line":5,"column":39,"index":262}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":263},"end":{"line":6,"column":26,"index":289}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/Users/christiansalazarpichardo/Documents/Barber_App/frontend/contexts/NotificationContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.NotificationProvider = NotificationProvider;\n  exports.useNotification = useNotification;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _expoNotifications = require(_dependencyMap[2], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[3], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[4], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _expoConstants = require(_dependencyMap[5], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _axios = require(_dependencyMap[6], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _reactJsxDevRuntime = require(_dependencyMap[7], \"react/jsx-dev-runtime\");\n  const BACKEND_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: true\n    })\n  });\n  const NotificationContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function NotificationProvider({\n    children\n  }) {\n    _s();\n    const [expoPushToken, setExpoPushToken] = (0, _react.useState)(null);\n    const [notification, setNotification] = (0, _react.useState)(null);\n    (0, _react.useEffect)(() => {\n      let isMounted = true;\n      const notificationListener = Notifications.addNotificationReceivedListener(notification => {\n        if (!isMounted) return;\n        setNotification(notification);\n      });\n      const responseListener = Notifications.addNotificationResponseReceivedListener(response => {\n        console.log('Notification response:', response);\n      });\n      return () => {\n        isMounted = false;\n        notificationListener.remove();\n        responseListener.remove();\n      };\n    }, []);\n    const registerForPushNotifications = async userId => {\n      if (!Device.isDevice) {\n        console.log('Must use physical device for push notifications');\n        return;\n      }\n      try {\n        const {\n          status: existingStatus\n        } = await Notifications.getPermissionsAsync();\n        let finalStatus = existingStatus;\n        if (existingStatus !== 'granted') {\n          const {\n            status\n          } = await Notifications.requestPermissionsAsync();\n          finalStatus = status;\n        }\n        if (finalStatus !== 'granted') {\n          console.log('Failed to get push token');\n          return;\n        }\n        const projectId = Constants.default.expoConfig?.extra?.eas?.projectId;\n        if (!projectId) {\n          console.log('Project ID not configured');\n          return;\n        }\n        const token = await Notifications.getExpoPushTokenAsync({\n          projectId\n        });\n        setExpoPushToken(token.data);\n\n        // Send token to backend\n        await axios.default.post(`${BACKEND_URL}/api/push-tokens`, {\n          user_id: userId,\n          token: token.data,\n          platform: Platform.default.OS\n        });\n        console.log('Push token registered:', token.data);\n      } catch (error) {\n        console.error('Error registering for push notifications:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(NotificationContext.Provider, {\n      value: {\n        expoPushToken,\n        notification,\n        registerForPushNotifications\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }, this);\n  }\n  _s(NotificationProvider, \"aRE/eNENpqa2WRLbwZn3XmAeyNk=\");\n  _c = NotificationProvider;\n  function useNotification() {\n    _s2();\n    const context = (0, _react.useContext)(NotificationContext);\n    if (context === undefined) {\n      throw new Error('useNotification must be used within a NotificationProvider');\n    }\n    return context;\n  }\n  _s2(useNotification, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"NotificationProvider\");\n});","lineCount":142,"map":[[30,2,26,0,"exports"],[30,9,26,0],[30,10,26,0,"NotificationProvider"],[30,30,26,0],[30,33,26,0,"NotificationProvider"],[30,53,26,0],[31,2,102,0,"exports"],[31,9,102,0],[31,10,102,0,"useNotification"],[31,25,102,0],[31,28,102,0,"useNotification"],[31,43,102,0],[32,2,108,1],[32,6,108,1,"_expoVirtualEnv"],[32,21,108,1],[32,24,108,1,"require"],[32,31,108,1],[32,32,108,1,"_dependencyMap"],[32,46,108,1],[33,2,1,0],[33,6,1,0,"_react"],[33,12,1,0],[33,15,1,0,"require"],[33,22,1,0],[33,23,1,0,"_dependencyMap"],[33,37,1,0],[34,2,2,0],[34,6,2,0,"_expoNotifications"],[34,24,2,0],[34,27,2,0,"require"],[34,34,2,0],[34,35,2,0,"_dependencyMap"],[34,49,2,0],[35,2,2,0],[35,6,2,0,"Notifications"],[35,19,2,0],[35,22,2,0,"_interopNamespace"],[35,39,2,0],[35,40,2,0,"_expoNotifications"],[35,58,2,0],[36,2,3,0],[36,6,3,0,"_expoDevice"],[36,17,3,0],[36,20,3,0,"require"],[36,27,3,0],[36,28,3,0,"_dependencyMap"],[36,42,3,0],[37,2,3,0],[37,6,3,0,"Device"],[37,12,3,0],[37,15,3,0,"_interopNamespace"],[37,32,3,0],[37,33,3,0,"_expoDevice"],[37,44,3,0],[38,2,3,38],[38,6,3,38,"_reactNativeWebDistExportsPlatform"],[38,40,3,38],[38,43,3,38,"require"],[38,50,3,38],[38,51,3,38,"_dependencyMap"],[38,65,3,38],[39,2,3,38],[39,6,3,38,"Platform"],[39,14,3,38],[39,17,3,38,"_interopDefault"],[39,32,3,38],[39,33,3,38,"_reactNativeWebDistExportsPlatform"],[39,67,3,38],[40,2,5,0],[40,6,5,0,"_expoConstants"],[40,20,5,0],[40,23,5,0,"require"],[40,30,5,0],[40,31,5,0,"_dependencyMap"],[40,45,5,0],[41,2,5,0],[41,6,5,0,"Constants"],[41,15,5,0],[41,18,5,0,"_interopDefault"],[41,33,5,0],[41,34,5,0,"_expoConstants"],[41,48,5,0],[42,2,6,0],[42,6,6,0,"_axios"],[42,12,6,0],[42,15,6,0,"require"],[42,22,6,0],[42,23,6,0,"_dependencyMap"],[42,37,6,0],[43,2,6,0],[43,6,6,0,"axios"],[43,11,6,0],[43,14,6,0,"_interopDefault"],[43,29,6,0],[43,30,6,0,"_axios"],[43,36,6,0],[44,2,6,26],[44,6,6,26,"_reactJsxDevRuntime"],[44,25,6,26],[44,28,6,26,"require"],[44,35,6,26],[44,36,6,26,"_dependencyMap"],[44,50,6,26],[45,2,8,0],[45,8,8,6,"BACKEND_URL"],[45,19,8,17],[45,22,8,20,"Constants"],[45,31,8,29],[45,32,8,29,"default"],[45,39,8,29],[45,40,8,30,"expoConfig"],[45,50,8,40],[45,52,8,42,"extra"],[45,57,8,47],[45,59,8,49,"EXPO_PUBLIC_BACKEND_URL"],[45,82,8,72],[45,86,8,72,"_expoVirtualEnv"],[45,101,8,72],[45,102,8,72,"env"],[45,105,8,72],[45,106,8,72,"EXPO_PUBLIC_BACKEND_URL"],[45,129,8,111],[46,2,10,0,"Notifications"],[46,15,10,13],[46,16,10,14,"setNotificationHandler"],[46,38,10,36],[46,39,10,37],[47,4,11,2,"handleNotification"],[47,22,11,20],[47,24,11,22],[47,30,11,22,"handleNotification"],[47,31,11,22],[47,37,11,35],[48,6,12,4,"shouldShowAlert"],[48,21,12,19],[48,23,12,21],[48,27,12,25],[49,6,13,4,"shouldPlaySound"],[49,21,13,19],[49,23,13,21],[49,27,13,25],[50,6,14,4,"shouldSetBadge"],[50,20,14,18],[50,22,14,20],[51,4,15,2],[51,5,15,3],[52,2,16,0],[52,3,16,1],[52,4,16,2],[53,2,24,0],[53,8,24,6,"NotificationContext"],[53,27,24,25],[53,43,24,28],[53,47,24,28,"createContext"],[53,53,24,41],[53,54,24,41,"createContext"],[53,67,24,41],[53,69,24,79,"undefined"],[53,78,24,88],[53,79,24,89],[54,2,26,7],[54,11,26,16,"NotificationProvider"],[54,31,26,36,"NotificationProvider"],[54,32,26,37],[55,4,26,39,"children"],[56,2,26,73],[56,3,26,74],[56,5,26,76],[57,4,26,76,"_s"],[57,6,26,76],[58,4,27,2],[58,10,27,8],[58,11,27,9,"expoPushToken"],[58,24,27,22],[58,26,27,24,"setExpoPushToken"],[58,42,27,40],[58,43,27,41],[58,46,27,44],[58,50,27,44,"useState"],[58,56,27,52],[58,57,27,52,"useState"],[58,65,27,52],[58,67,27,68],[58,71,27,72],[58,72,27,73],[59,4,28,2],[59,10,28,8],[59,11,28,9,"notification"],[59,23,28,21],[59,25,28,23,"setNotification"],[59,40,28,38],[59,41,28,39],[59,44,28,42],[59,48,28,42,"useState"],[59,54,28,50],[59,55,28,50,"useState"],[59,63,28,50],[59,65,28,86],[59,69,28,90],[59,70,28,91],[60,4,30,2],[60,8,30,2,"useEffect"],[60,14,30,11],[60,15,30,11,"useEffect"],[60,24,30,11],[60,26,30,12],[60,32,30,18],[61,6,31,4],[61,10,31,8,"isMounted"],[61,19,31,17],[61,22,31,20],[61,26,31,24],[62,6,33,4],[62,12,33,10,"notificationListener"],[62,32,33,30],[62,35,33,33,"Notifications"],[62,48,33,46],[62,49,33,47,"addNotificationReceivedListener"],[62,80,33,78],[62,81,33,79,"notification"],[62,93,33,91],[62,97,33,95],[63,8,34,6],[63,12,34,10],[63,13,34,11,"isMounted"],[63,22,34,20],[63,24,34,22],[64,8,35,6,"setNotification"],[64,23,35,21],[64,24,35,22,"notification"],[64,36,35,34],[64,37,35,35],[65,6,36,4],[65,7,36,5],[65,8,36,6],[66,6,38,4],[66,12,38,10,"responseListener"],[66,28,38,26],[66,31,38,29,"Notifications"],[66,44,38,42],[66,45,38,43,"addNotificationResponseReceivedListener"],[66,84,38,82],[66,85,38,83,"response"],[66,93,38,91],[66,97,38,95],[67,8,39,6,"console"],[67,15,39,13],[67,16,39,14,"log"],[67,19,39,17],[67,20,39,18],[67,44,39,42],[67,46,39,44,"response"],[67,54,39,52],[67,55,39,53],[68,6,40,4],[68,7,40,5],[68,8,40,6],[69,6,42,4],[69,13,42,11],[69,19,42,17],[70,8,43,6,"isMounted"],[70,17,43,15],[70,20,43,18],[70,25,43,23],[71,8,44,6,"notificationListener"],[71,28,44,26],[71,29,44,27,"remove"],[71,35,44,33],[71,36,44,34],[71,37,44,35],[72,8,45,6,"responseListener"],[72,24,45,22],[72,25,45,23,"remove"],[72,31,45,29],[72,32,45,30],[72,33,45,31],[73,6,46,4],[73,7,46,5],[74,4,47,2],[74,5,47,3],[74,7,47,5],[74,9,47,7],[74,10,47,8],[75,4,49,2],[75,10,49,8,"registerForPushNotifications"],[75,38,49,36],[75,41,49,39],[75,47,49,46,"userId"],[75,53,49,60],[75,57,49,65],[76,6,50,4],[76,10,50,8],[76,11,50,9,"Device"],[76,17,50,15],[76,18,50,16,"isDevice"],[76,26,50,24],[76,28,50,26],[77,8,51,6,"console"],[77,15,51,13],[77,16,51,14,"log"],[77,19,51,17],[77,20,51,18],[77,69,51,67],[77,70,51,68],[78,8,52,6],[79,6,53,4],[80,6,55,4],[80,10,55,8],[81,8,56,6],[81,14,56,12],[82,10,56,14,"status"],[82,16,56,20],[82,18,56,22,"existingStatus"],[83,8,56,37],[83,9,56,38],[83,12,56,41],[83,18,56,47,"Notifications"],[83,31,56,60],[83,32,56,61,"getPermissionsAsync"],[83,51,56,80],[83,52,56,81],[83,53,56,82],[84,8,57,6],[84,12,57,10,"finalStatus"],[84,23,57,21],[84,26,57,24,"existingStatus"],[84,40,57,38],[85,8,59,6],[85,12,59,10,"existingStatus"],[85,26,59,24],[85,31,59,29],[85,40,59,38],[85,42,59,40],[86,10,60,8],[86,16,60,14],[87,12,60,16,"status"],[88,10,60,23],[88,11,60,24],[88,14,60,27],[88,20,60,33,"Notifications"],[88,33,60,46],[88,34,60,47,"requestPermissionsAsync"],[88,57,60,70],[88,58,60,71],[88,59,60,72],[89,10,61,8,"finalStatus"],[89,21,61,19],[89,24,61,22,"status"],[89,30,61,28],[90,8,62,6],[91,8,64,6],[91,12,64,10,"finalStatus"],[91,23,64,21],[91,28,64,26],[91,37,64,35],[91,39,64,37],[92,10,65,8,"console"],[92,17,65,15],[92,18,65,16,"log"],[92,21,65,19],[92,22,65,20],[92,48,65,46],[92,49,65,47],[93,10,66,8],[94,8,67,6],[95,8,69,6],[95,14,69,12,"projectId"],[95,23,69,21],[95,26,69,24,"Constants"],[95,35,69,33],[95,36,69,33,"default"],[95,43,69,33],[95,44,69,34,"expoConfig"],[95,54,69,44],[95,56,69,46,"extra"],[95,61,69,51],[95,63,69,53,"eas"],[95,66,69,56],[95,68,69,58,"projectId"],[95,77,69,67],[96,8,70,6],[96,12,70,10],[96,13,70,11,"projectId"],[96,22,70,20],[96,24,70,22],[97,10,71,8,"console"],[97,17,71,15],[97,18,71,16,"log"],[97,21,71,19],[97,22,71,20],[97,49,71,47],[97,50,71,48],[98,10,72,8],[99,8,73,6],[100,8,75,6],[100,14,75,12,"token"],[100,19,75,17],[100,22,75,20],[100,28,75,26,"Notifications"],[100,41,75,39],[100,42,75,40,"getExpoPushTokenAsync"],[100,63,75,61],[100,64,75,62],[101,10,75,64,"projectId"],[102,8,75,74],[102,9,75,75],[102,10,75,76],[103,8,76,6,"setExpoPushToken"],[103,24,76,22],[103,25,76,23,"token"],[103,30,76,28],[103,31,76,29,"data"],[103,35,76,33],[103,36,76,34],[105,8,78,6],[106,8,79,6],[106,14,79,12,"axios"],[106,19,79,17],[106,20,79,17,"default"],[106,27,79,17],[106,28,79,18,"post"],[106,32,79,22],[106,33,79,23],[106,36,79,26,"BACKEND_URL"],[106,47,79,37],[106,65,79,55],[106,67,79,57],[107,10,80,8,"user_id"],[107,17,80,15],[107,19,80,17,"userId"],[107,25,80,23],[108,10,81,8,"token"],[108,15,81,13],[108,17,81,15,"token"],[108,22,81,20],[108,23,81,21,"data"],[108,27,81,25],[109,10,82,8,"platform"],[109,18,82,16],[109,20,82,18,"Platform"],[109,28,82,26],[109,29,82,26,"default"],[109,36,82,26],[109,37,82,27,"OS"],[110,8,83,6],[110,9,83,7],[110,10,83,8],[111,8,85,6,"console"],[111,15,85,13],[111,16,85,14,"log"],[111,19,85,17],[111,20,85,18],[111,44,85,42],[111,46,85,44,"token"],[111,51,85,49],[111,52,85,50,"data"],[111,56,85,54],[111,57,85,55],[112,6,86,4],[112,7,86,5],[112,8,86,6],[112,15,86,13,"error"],[112,20,86,18],[112,22,86,20],[113,8,87,6,"console"],[113,15,87,13],[113,16,87,14,"error"],[113,21,87,19],[113,22,87,20],[113,65,87,63],[113,67,87,65,"error"],[113,72,87,70],[113,73,87,71],[114,6,88,4],[115,4,89,2],[115,5,89,3],[116,4,91,2],[116,24,92,4],[116,28,92,4,"_reactJsxDevRuntime"],[116,47,92,4],[116,48,92,4,"jsxDEV"],[116,54,92,4],[116,56,92,5,"NotificationContext"],[116,75,92,24],[116,76,92,25,"Provider"],[116,84,92,33],[117,6,92,34,"value"],[117,11,92,39],[117,13,92,41],[118,8,93,6,"expoPushToken"],[118,21,93,19],[119,8,94,6,"notification"],[119,20,94,18],[120,8,95,6,"registerForPushNotifications"],[121,6,96,4],[121,7,96,6],[122,6,96,6,"children"],[122,14,96,6],[122,16,97,7,"children"],[123,4,97,15],[124,6,97,15,"fileName"],[124,14,97,15],[124,16,97,15,"_jsxFileName"],[124,28,97,15],[125,6,97,15,"lineNumber"],[125,16,97,15],[126,6,97,15,"columnNumber"],[126,18,97,15],[127,4,97,15],[127,11,98,34],[127,12,98,35],[128,2,100,0],[129,2,100,1,"_s"],[129,4,100,1],[129,5,26,16,"NotificationProvider"],[129,25,26,36],[130,2,26,36,"_c"],[130,4,26,36],[130,7,26,16,"NotificationProvider"],[130,27,26,36],[131,2,102,7],[131,11,102,16,"useNotification"],[131,26,102,31,"useNotification"],[131,27,102,31],[131,29,102,34],[132,4,102,34,"_s2"],[132,7,102,34],[133,4,103,2],[133,10,103,8,"context"],[133,17,103,15],[133,20,103,18],[133,24,103,18,"useContext"],[133,30,103,28],[133,31,103,28,"useContext"],[133,41,103,28],[133,43,103,29,"NotificationContext"],[133,62,103,48],[133,63,103,49],[134,4,104,2],[134,8,104,6,"context"],[134,15,104,13],[134,20,104,18,"undefined"],[134,29,104,27],[134,31,104,29],[135,6,105,4],[135,12,105,10],[135,16,105,14,"Error"],[135,21,105,19],[135,22,105,20],[135,82,105,80],[135,83,105,81],[136,4,106,2],[137,4,107,2],[137,11,107,9,"context"],[137,18,107,16],[138,2,108,0],[139,2,108,1,"_s2"],[139,5,108,1],[139,6,102,16,"useNotification"],[139,21,102,31],[140,2,102,31],[140,6,102,31,"_c"],[140,8,102,31],[141,2,102,31,"$RefreshReg$"],[141,14,102,31],[141,15,102,31,"_c"],[141,17,102,31],[142,0,102,31],[142,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","NotificationProvider","useEffect$argument_0","Notifications.addNotificationReceivedListener$argument_0","Notifications.addNotificationResponseReceivedListener$argument_0","<anonymous>","registerForPushNotifications","useNotification"],"mappings":"AAA;sBCU;IDI;OEW;YCI;+ECG;KDG;mFEE;KFE;WGE;KHI;GDC;uCKE;GLwC;CFW;OQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}